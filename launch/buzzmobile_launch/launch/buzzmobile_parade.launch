<launch>

  <arg name="record_data" default="false" />
  <arg name="ns" value="buzzmobile"/>
  <group ns="$(arg ns)">
	<node pkg="hokuyo_node" name="hokuyo_node" type="hokuyo_node">
        <param name="port" value="/dev/ttyACM0" /> <!-- TODO replace with hokuyo port from udev -->
    </node>
	<node pkg="usb_cam" name="front_cam" type="usb_cam_node">
		<param name="video_device" value="/dev/video0"/>
	</node> 
    <node pkg="car_interface" name="car_interface" type="car_interface"/>
    <node pkg="joy" name="joy_node" type="joy_node">
        <param name="dev" value="/dev/input/js0" />
    </node>
    <node pkg="controller_teleop" name="teleop_joy" type="teleop_joy_node" />

    <node pkg="projection" name="frontCam_proj" type="projection_node">
        <param name="ground_z_dim" value="3.5365"/>
    </node>
  <node pkg="obstacle_detector" name="obstacle_detector" type="detector_node.py"/>

  <include file="lane_classifier_pipeline.launch"/>
  <include file="visualization.launch" ns="viz">
    <arg name="ns" value="$(arg ns)"/>
  </include>

  </group>
  <node pkg="rosbag" type="record" name="rosbag_record_cam"
     args="/buzzmobile/image_raw /buzzmobile/camera_info /buzzmobile/scan /buzzmobile/teleop_joy /buzzmobile/odom /buzzmobile/lane_labels"
     if="$(arg record_data)" />

</launch>
